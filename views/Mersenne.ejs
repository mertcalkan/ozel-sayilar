<!DOCTYPE html>
<!-- Coding By CodingNepal - youtube.com/codingnepal -->
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Mersenne Sayı Kontrolü | Özel Sayılar Dünyası</title>
  <link rel="stylesheet" href="/css/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <a href="/">
    <div class="back-main-page">
      <p>Ana Sayfaya Dön</p>
    </div>
    </a>
  <div class="wrapper">
    <header>
      <h1>Mersenne Sayı Kontrolü</h1>
      <p>Mersenne sayıları, ikinin kuvvetlerinin bir eksiği şeklinde olan sayılardır ve n doğal sayısı için
        2<sup>n</sup> − 1 şeklinde hesaplanır.Eğer bu sayı asalsa Mersenne asal sayısı olmuş olur.</p>
    </header>
    <div class="inputs">
      <input type="number" min="0" spellcheck="false" placeholder="Lütfen sayıyı giriniz"
        onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))">
      <button>Kontrol Et</button>
    </div>
    <p class="info-txt"></p>
  </div>
  <script>
    const txtInput = document.querySelector(".inputs input"),
      checkBtn = document.querySelector(".inputs button"),
      infoTxt = document.querySelector(".info-txt");



    var filterInput;
    var intFilterInput;

    checkBtn.addEventListener("click", () => {

      //   vr secondPart = String(filterInput*filterInput).slice(-filterInput.length);
      //   var secondPartInt = Number(secondPart);
      //   var firstPart = String(filterInput*filterInput).slice(0,-filterInput.length);
      //   var firstPartInt = Number(firstPart);  a
      infoTxt.style.display = "block";


      if (isMercenne(intFilterInput) && isPrime(intFilterInput)) {
        console.log(Math.log(filterInput) / Math.log(2));
        console.log(filterInput)
        return infoTxt.innerHTML =
          `Evet, <span> ${txtInput.value} </span> sayısı Mersenne sayısıdır. Aynı zamanda bir Mersenne asal sayısıdır.`;
      } else if (isMercenne(intFilterInput) && !isPrime(intFilterInput)) {
        infoTxt.innerHTML =
          `Evet, <span> ${txtInput.value} </span> sayısı Mersenne sayısıdır.Fakat bir Mersenne asal sayısı değildir.`
      } else {
        infoTxt.innerHTML = `Hayır, <span> ${txtInput.value} </span> sayısı Mersenne sayısı değildir.`
      }
    });
    txtInput.addEventListener("keypress", function (event) {
      // If the user presses the "Enter" key on the keyboard
      if (event.key === "Enter") {
        // Cancel the default action, if needed
        infoTxt.style.display = "block";

      if(filterInput){
        if (isMercenne(intFilterInput) && isPrime(intFilterInput)) {
          
          return infoTxt.innerHTML =
            `Evet, <span> ${txtInput.value} </span> sayısı Mersenne sayısıdır. Aynı zamanda bir Mersenne asal sayısıdır.`;
        } else if (isMercenne(intFilterInput) && !isPrime(intFilterInput)) {
          infoTxt.innerHTML =
            `Evet, <span> ${txtInput.value} </span> sayısı Mersenne sayısıdır.Fakat bir Mersenne asal sayısı değildir.`
        } else {
          infoTxt.innerHTML = `Hayır, <span> ${txtInput.value} </span> sayısı Mersenne sayısı değildir.`
        }
      }
      else if(filterInput == ""){
        infoTxt.innerHTML = "";
      }
      
      }
    });
    txtInput.addEventListener("keyup", () => {
      filterInput = txtInput.value.toLowerCase().replace(/[^A-Z0-9]/ig, "");
      intFilterInput = Number(filterInput);
      reverseInput = filterInput.split("").reverse().join("");


      if (filterInput) {
        return checkBtn.classList.add("active");
      }
      infoTxt.style.display = "none";
      checkBtn.classList.remove("active");
    });

    function isMercenne(intFilterInput) {
      if (intFilterInput == 0)
        return false;

      return (Math.log(intFilterInput + 1) / Math.log(2)) % 1 === 0;
    }

    function isPrime(intFilterInput) {
      for (var i = 2; i < intFilterInput; i++)
        if (intFilterInput % i === 0) return false;
      return intFilterInput > 1;
    }
  </script>
</body>

</html>